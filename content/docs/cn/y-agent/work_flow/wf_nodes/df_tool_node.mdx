---
title: 内置工具
description: 内置工具的详细配置和说明
---



<Accordions title="内置工具">

<Accordion title="知识库查询">

知识库查询工具用于查询知识库中的文档。

配置方法：

queries参数：提取要查询的问题列表 格式["问题1", "问题2"]，起作用的机制是：根据输入问题，进行向量库匹配。
tags参数：指定要查询的标签列表，即知识库设置的标签 格式["标签1", "标签2"]，起作用的机制是：如果填写标签，则只查询包含这些标签的 和 没有任何标签的文档。
ids参数：指定要查询的EXCEL参数库的 唯一编码 列表 格式["ID1", "ID2"]起作用的机制是： 只针对EXCEL参数库起作用

文档知识库
文档知识库召回文本数
EXCEL参数库
EXCEL参数库召回文本数

元数据过滤：EXCEL参数库的元数据过滤条件，用于过滤参数库中符合条件的元数据。
输出格式：JSON，用于后续流程解析。MarkDown，通常直接用于输出给模型或者用户。
评分过滤值：评分过滤值，用于过滤掉评分低于该值的结果。

</Accordion>

<Accordion title="计算器">

计算器工具用于进行简单计算，可以填写数学表达式。

配置方法：

expression参数：计算表达式 格式"1+2"

计算器工具，其实是对NumExpr的简单封装，具体功能参考NumExpr的文档。

NumExpr 支持以下运算符和函数：

逻辑运算符：&, |, ~

比较运算符：`<`, `<=`, `==`, `!=`, `>=`, `>`

一元算术运算符：`-`

二进制算术运算符：`+`, `-`, `*`, `/`, `**`, `%`, `<<`, `>>`

支持的函数：where, sin, cos, tan, arcsin, arccos, arctan, arctan2, sinh, cosh, tanh, arcsinh, arccosh, arctanh, log, log10, log1p, exp, expm1, sqrt, abs, conj, real, imag, complex, contains

</Accordion>

<Accordion title="查询流程日志" id="query_flow_logs">
工具名称：		
flow_logs	查询流程日志

功能描述：按照节点id获取流程日志

使用方法：
| 参数名 | 说明 |  参考值 |
|--------|--------|------|
| flow_id | 流程唯一标识 |  已记录的流程ID |
| role_id | 角色/节点唯一标识 | 已记录的节点ID | 
| start_time |  日志起始时间（引用开始节点输入） | `{{role.input.start_time}}` |
| end_time | 日志结束时间（引用开始节点输入） | `{{role.input.end_time}}` | 
| max_top_n | 最大返回日志数量，空值表示不限制 |   | 

返回值为 JSON 数组，如下：
```json
[{"input":"节点的输入1", "log_id":1231, "node_log_id":22, "output":"节点的输出1", "role":"节点角色名称","role_id":"1744097553045"},
{"input":"节点的输入2", "log_id":1231, "node_log_id":22, "output":"节点的输出2", "role":"节点角色名称","role_id":"1744097553045"}]
```
| 字段 | 描述 |
| :--- | :--- |
| `input` | 节点的输入 |
| `log_id` | 日志的唯一标识 |
| `node_log_id` | 节点日志的唯一标识 |
| `output` | 节点的输出 |
| `role` | 节点角色名称，节点顶部的角色名称 |
| `role_id` | 节点的唯一标识，节点顶部的id |


</Accordion>
<Accordion title="添加单元测试">
工具名称：		
add_case_unit	添加单元测试	

功能描述：用于把指定的流程运行日志添加到单元测试中。

使用方法：
| 参数名 | 说明 | 参考值 |
|--------|--------|------|
| unit_cate_id | 手工建立好的单元测试的分类id | - |
| node_log_id | 要添加单元测试的节点日志id，从查询流程日志中可以获取到 | - |
| test_note | 测试备注信息 | 注意以下两点：1、回答是否前后矛盾。2、是否存在歧义。 |

添加成功后，工具会返回类似结果：
用例id: 5465


</Accordion>
<Accordion title="添加训练语料">

add_train	添加训练语料	添加训练语料

</Accordion>
<Accordion title="添加文档知识">

add_content	添加文档知识	向指定知识库动态添加文档知识

</Accordion>
<Accordion title="知识库内容追加">
		
append_content	追加文档内容	向指定文档中追加内容
输入：
doucument_id参数  填写文档的id
content参数 填写要追加的内容
test_note参数 填写测试备注

输出：？？？

</Accordion>
<Accordion title="产品参数主题">

doc_param_topic	产品参数主题	用于通过产品ids列表获取对应的产品参数主题

</Accordion>

<Accordion title="根据SKU ID 获取商品名称">

TODO：待补充

</Accordion>
TODO：回答评分接口

TODO：如何显示引用文档
</Accordions>
		
